(this["webpackJsonptwim-blog"]=this["webpackJsonptwim-blog"]||[]).push([[0],{27:function(e,t,c){},28:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(19),i=c.n(n),r=(c(27),c(2)),l=(c(28),c(3)),o=c(11),j=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:e},d=c(0),u=function(){var e=Object(l.f)(),t=Object(s.useContext)(C),c=Object(r.a)(t,2),a=c[0],n=c[1];function i(t){"login"===t?(localStorage.clear(),n({page:"login",userData:null}),e.push("/login")):"createPost"===t&&e.push("/createPost")}return"login"===a.page?Object(d.jsxs)("nav",{className:"nav__bar",children:[Object(d.jsx)("div",{className:"nav__heading",children:Object(d.jsx)("h2",{children:"Welcome to Twimbit blogs"})}),Object(d.jsx)("div",{className:"nav__link",children:Object(d.jsx)(o.b,{to:"/register",onClick:function(){return n({page:"register",userData:null})},style:{textDecoration:"none",color:"white"},children:Object(d.jsx)("h4",{children:"Don't have an account...Register here!"})})})]}):"register"===a.page?Object(d.jsxs)("nav",{className:"nav__bar",children:[Object(d.jsx)("div",{className:"nav__heading",children:Object(d.jsx)("h2",{children:"Welcome to Twimbit blogs"})}),Object(d.jsx)("div",{className:"nav__link",children:Object(d.jsx)(o.b,{to:"/login",onClick:function(){return n({page:"login",userData:null})},style:{textDecoration:"none",color:"white"},children:Object(d.jsx)("h4",{children:"Login!"})})})]}):"logedIn"===a.page?Object(d.jsxs)("nav",{className:"nav__bar",children:[Object(d.jsx)("div",{className:"nav__heading",children:Object(d.jsxs)("h2",{children:["Hi ",a.userData.name.toUpperCase()]})}),Object(d.jsxs)("div",{className:"nav__link",children:[Object(d.jsx)("button",{className:"btn #c62828 blue darken-3",onClick:function(){i("createPost")},children:"Create  Post"}),Object(d.jsx)("button",{className:"btn #c62828 red darken-3",style:{marginLeft:"1rem"},onClick:function(){i("login")},children:"Logout"})]})]}):void 0},b=c(4),p=c.n(b),h=c(7),m=c(8),O=c.n(m),x=function(e){var t=e.callBack,c=Object(l.f)(),a=Object(s.useState)(""),n=Object(r.a)(a,2),i=n[0],o=n[1],j=Object(s.useState)(""),u=Object(r.a)(j,2),b=u[0],m=u[1],x=Object(s.useState)(""),v=Object(r.a)(x,2),f=v[0],g=v[1],N=Object(s.useState)(""),y=Object(r.a)(N,2),w=y[0],k=y[1],C=Object(s.useState)(!1),S=Object(r.a)(C,2),_=S[0],B=S[1],P=function(){var e=Object(h.a)(p.a.mark((function e(){var s,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b!==w){e.next=11;break}return B(!0),e.next=4,fetch("https://twimbit-api.herokuapp.com/api/auth/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f,password:b,email:i})});case 4:return s=e.sent,e.next=7,s.json();case 7:a=e.sent,201===s.status?(t(),c.push("/login"),O.a.toast({html:"Login In to Continue",classes:"#c62828 red darken-3"})):500===s.status&&(O.a.toast({html:a.message,classes:"#c62828 red darken-3"}),o(""),g(""),m(""),k(""),B(!1)),e.next=12;break;case 11:return e.abrupt("return",O.a.toast({html:"Passwords dont match",classes:"#c62828 red darken-3"}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return _?Object(d.jsx)("div",{className:"loader",style:{position:"absolute",bottom:"50%",right:" 50%"},children:Object(d.jsx)("div",{className:"preloader-wrapper small active",children:Object(d.jsxs)("div",{className:"spinner-layer spinner-green-only",children:[Object(d.jsx)("div",{className:"circle-clipper left",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"gap-patch",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"circle-clipper right",children:Object(d.jsx)("div",{className:"circle"})})]})})}):Object(d.jsxs)("div",{className:"container",id:"login__container",children:[Object(d.jsx)("div",{className:"row",style:{textAlign:"center",marginTop:"8rem"},children:Object(d.jsx)("h1",{children:"Welcome !!"})}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),P()},children:[Object(d.jsx)("div",{className:"row input__field",children:Object(d.jsxs)("div",{className:"input-field col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"email"}),Object(d.jsx)("input",{requried:"true",placeholder:"Email",id:"icon_prefix",type:"email",className:"validate",value:i,onChange:function(e){o(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row input__field",children:Object(d.jsxs)("div",{className:"input-field col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"accessibility"}),Object(d.jsx)("input",{requried:"true",placeholder:"Name",id:"icon_prefix1",type:"text",className:"validate",value:f,onChange:function(e){g(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"input-field col col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"account_circle"}),Object(d.jsx)("input",{requried:"true",placeholder:"Password",id:"icon_telephone",type:"password",className:"validate",value:b,onChange:function(e){m(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"input-field col col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"check_circle"}),Object(d.jsx)("input",{requried:"true",placeholder:"Confrim Password",id:"icon_telephone1",type:"password",className:"validate",value:w,onChange:function(e){k(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col s6 offset-s3",style:{textAlign:"center"},children:Object(d.jsx)("input",{type:"submit",value:"Register",className:"btn waves-effect waves-light #64b5f6 blue lighten-2",onClick:function(){return P()}})})})]})]})},v=function(e){var t=e.callBack,c=Object(l.f)(),a=Object(s.useContext)(S),n=(a.state,a.dispatch),i=Object(s.useState)(""),o=Object(r.a)(i,2),j=o[0],u=o[1],b=Object(s.useState)(""),m=Object(r.a)(b,2),x=m[0],v=m[1],f=Object(s.useState)(!1),g=Object(r.a)(f,2),N=g[0],y=g[1],w=function(){var e=Object(h.a)(p.a.mark((function e(){var s,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,fetch("https://twimbit-api.herokuapp.com/api/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:x,email:j})});case 3:return s=e.sent,e.next=6,s.json();case 6:a=e.sent,200===s.status?(localStorage.setItem("jwt",a.token),localStorage.setItem("user",JSON.stringify(a.user)),n({type:"USER",payload:a.user}),t(a.user),c.push("/"),O.a.toast({html:"Successfully Loged In",classes:"#c62828 red darken-3"})):500===s.status&&(O.a.toast({html:a.message,classes:"#c62828 red darken-3"}),u(""),v(""),y(!1));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return N?Object(d.jsx)("div",{className:"loader",style:{position:"absolute",bottom:"50%",right:" 50%"},children:Object(d.jsx)("div",{className:"preloader-wrapper small active",children:Object(d.jsxs)("div",{className:"spinner-layer spinner-green-only",children:[Object(d.jsx)("div",{className:"circle-clipper left",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"gap-patch",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"circle-clipper right",children:Object(d.jsx)("div",{className:"circle"})})]})})}):Object(d.jsxs)("div",{className:"container",id:"login__container",children:[Object(d.jsx)("div",{className:"row",style:{textAlign:"center",marginTop:"8rem"},children:Object(d.jsx)("h1",{children:"Welcome !!"})}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w()},children:[Object(d.jsx)("div",{className:"row input__field",children:Object(d.jsxs)("div",{className:"input-field col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"email"}),Object(d.jsx)("input",{required:"true",placeholder:"Email",id:"icon_prefix",type:"email",className:"validate",value:j,onChange:function(e){u(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"input-field col col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"account_circle"}),Object(d.jsx)("input",{required:"true",placeholder:"Password",id:"icon_telephone",type:"password",className:"validate",value:x,onChange:function(e){v(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col s6 offset-s3",style:{textAlign:"center"},children:Object(d.jsx)("input",{type:"submit",value:"Login",className:"btn waves-effect waves-light #64b5f6 blue lighten-2"})})})]})]})},f=function(e){var t=e.postItem,c=Object(s.useContext)(S),a=c.state,n=(c.dispatch,Object(s.useState)(t.likes.length)),i=Object(r.a)(n,2),l=i[0],j=i[1],u=Object(s.useState)(t.likes.includes(a._id)),b=Object(r.a)(u,2),m=b[0],x=b[1],v=Object(s.useState)(t.comments),f=Object(r.a)(v,2),g=f[0],N=f[1],y=Object(s.useState)(""),w=Object(r.a)(y,2),k=w[0],C=w[1],_=Object(s.useState)(!1),B=Object(r.a)(_,2),P=B[0],A=B[1],I=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(l+1),x(!0),e.next=4,fetch("https://twimbit-api.herokuapp.com/api/post/likePost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t._id})});case 4:200===e.sent.status||O.a.toast({html:"Some Error Occured",classes:"#c62828 red darken-3"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(l-1),x(!1),e.next=4,fetch("https://twimbit-api.herokuapp.com/api/post/unlikePost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t._id})});case 4:200===e.sent.status||O.a.toast({html:"Some Error Occured",classes:"#c62828 red darken-3"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(h.a)(p.a.mark((function e(){var c,s,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),C(""),e.next=4,fetch("https://twimbit-api.herokuapp.com/api/post/commentPost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t._id,text:k})});case 4:return c=e.sent,e.next=7,c.json();case 7:s=e.sent,201===c.status?(console.log(s),a=g.concat(s),console.log(a),N(a),A(!1)):O.a.toast({html:"Some Error Occured",classes:"#c62828 red darken-3"});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"card grey darken-1",style:{width:"100%"},children:Object(d.jsxs)("div",{className:"card-content white-text",children:[Object(d.jsxs)("span",{style:{color:"black",fontSize:"2.5rem",fontWeight:"normal"},className:"card-title",children:["Posted By:- ",t.postedBy.name.toUpperCase()]}),Object(d.jsx)("div",{children:Object(d.jsx)("h2",{style:{color:"white"},children:t.title})}),Object(d.jsx)(o.b,{to:{pathname:"/postDetails",state:{postedBy:t.postedBy.name,title:t.title,content:t.content}},style:{color:"#0818A8"},children:"Know More..."}),Object(d.jsxs)("div",{style:{marginTop:"1rem",display:"flex"},children:[m?Object(d.jsx)("i",{className:"material-icons",onClick:function(){T()},children:"thumb_up"}):Object(d.jsx)("i",{className:"material-icons",onClick:function(){I()},children:"thumb_down"}),Object(d.jsx)("span",{children:Object(d.jsxs)("h6",{children:[l," likes"]})})]}),Object(d.jsx)("div",{children:Object(d.jsx)("h5",{style:{color:"white"},children:"Comments"})}),g.map((function(e,t){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h6",{style:{color:"#1F51FF"},children:e.postedBy.name.toUpperCase()}),Object(d.jsxs)("p",{style:{color:"black",padding:"0px"},children:[" ",e.text]}),Object(d.jsx)("hr",{})]},t)})),P?Object(d.jsx)("div",{className:"loader",style:{position:"absolute",bottom:"50%",right:" 50%"},children:Object(d.jsx)("div",{className:"preloader-wrapper small active",children:Object(d.jsxs)("div",{className:"spinner-layer spinner-green-only",children:[Object(d.jsx)("div",{className:"circle-clipper left",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"gap-patch",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"circle-clipper right",children:Object(d.jsx)("div",{className:"circle"})})]})})}):Object(d.jsx)("div",{}),Object(d.jsx)("div",{style:{marginTop:"2rem"},children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),D()},children:[Object(d.jsx)("input",{type:"text",value:k,onChange:function(e){C(e.target.value)},placeholder:"Add a Comment"}),Object(d.jsx)("input",{type:"submit",value:"Comment",className:"btn waves-effect waves-light #64b5f6 blue lighten-2"})]})})]})},t._id)},g=c(22),N=c.n(g),y=function(){var e=Object(s.useContext)(S),t=(e.state,e.dispatch,Object(s.useState)([])),c=Object(r.a)(t,2),a=c[0],n=c[1],i=Object(s.useState)(!1),l=Object(r.a)(i,2),o=l[0],j=l[1],u=Object(s.useState)(0),b=Object(r.a)(u,2),m=b[0],O=b[1],x=Object(s.useState)(10),v=Object(r.a)(x,1)[0];Object(s.useEffect)((function(){return g()}),[]);var g=function(){var e=Object(h.a)(p.a.mark((function e(){var t,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,fetch("https://twimbit-api.herokuapp.com/api/post/allPosts?start=".concat(0),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}});case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,201===t.status?(n(c),j(!1)):n([]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.selected,O(c);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(o)return Object(d.jsx)("div",{className:"loader",style:{position:"absolute",bottom:"50%",right:" 50%"},children:Object(d.jsx)("div",{className:"preloader-wrapper small active",children:Object(d.jsxs)("div",{className:"spinner-layer spinner-green-only",children:[Object(d.jsx)("div",{className:"circle-clipper left",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"gap-patch",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"circle-clipper right",children:Object(d.jsx)("div",{className:"circle"})})]})})});var w=(m+1)*v,k=w-v,C=a.slice(k,w).map((function(e){return Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col l4 offset-l4 s12",children:Object(d.jsx)(f,{postItem:e})})},e._id)})),_=Math.ceil(a.length/v);return Object(d.jsxs)("div",{className:"container-fluid",children:[Object(d.jsx)("div",{className:"row",style:{textAlign:"center"},children:Object(d.jsx)("h1",{children:"These are the posts"})}),C,Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(N.a,{previousLabel:"Previous",nextLabel:"Next",pageCount:_,onPageChange:y,containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive"})})]})},w=function(){var e=Object(l.f)(),t=Object(l.g)().state,c=t.postedBy,s=t.title,a=t.content;return Object(d.jsx)("div",{className:"row",style:{marginTop:"10rem",textAlign:"center"},children:Object(d.jsx)("div",{className:"col l4 offset-l4 s12",children:Object(d.jsx)("div",{className:"card blue-grey darken-1",style:{width:"100%"},children:Object(d.jsxs)("div",{className:"card-content white-text",children:[Object(d.jsx)("span",{style:{color:"black",fontSize:"2rem"},className:"card-title",children:c.toUpperCase()}),Object(d.jsx)("div",{children:Object(d.jsx)("h2",{style:{color:"white"},children:s})}),Object(d.jsx)("div",{children:Object(d.jsx)("p",{children:a})}),Object(d.jsx)("button",{style:{marginTop:"3rem"},type:"submit",value:"Register",className:"btn waves-effect waves-light #64b5f6 blue lighten-2",onClick:function(){return e.goBack()},children:"GO BACK"})]})})})})},k=function(){var e=Object(l.f)(),t=Object(s.useState)(""),c=Object(r.a)(t,2),a=c[0],n=c[1],i=Object(s.useState)(""),o=Object(r.a)(i,2),j=o[0],u=o[1],b=Object(s.useState)(!1),m=Object(r.a)(b,2),x=m[0],v=m[1],f=function(){var t=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.next=3,fetch("https://twimbit-api.herokuapp.com/api/post/createPost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:a,content:j})});case 3:200===t.sent.status?(e.goBack(),v(!1)):(v(!1),O.a.toast({html:"Some Error Occured",classes:"#c62828 red darken-3"}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return x?Object(d.jsx)("div",{className:"loader",style:{position:"absolute",bottom:"50%",right:" 50%"},children:Object(d.jsx)("div",{className:"preloader-wrapper small active",children:Object(d.jsxs)("div",{className:"spinner-layer spinner-green-only",children:[Object(d.jsx)("div",{className:"circle-clipper left",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"gap-patch",children:Object(d.jsx)("div",{className:"circle"})}),Object(d.jsx)("div",{className:"circle-clipper right",children:Object(d.jsx)("div",{className:"circle"})})]})})}):Object(d.jsxs)("div",{className:"container",id:"login__container",children:[Object(d.jsx)("div",{className:"row",style:{textAlign:"center",marginTop:"8rem"},children:Object(d.jsx)("h1",{children:"Create Post !!"})}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f()},children:[Object(d.jsx)("div",{className:"row input__field",children:Object(d.jsxs)("div",{className:"input-field col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"local_bar"}),Object(d.jsx)("input",{required:"true",placeholder:"Title",id:"icon_prefix",type:"text",className:"validate",value:a,onChange:function(e){n(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"input-field col col s12 l6 offset-l3",children:[Object(d.jsx)("i",{className:"material-icons prefix",children:"lightbulb_outline"}),Object(d.jsx)("textarea",{rows:"4",cols:"50",style:{padding:"1rem"},required:"true",placeholder:"Content",id:"icon_telephone",type:"text",className:"validate",value:j,onChange:function(e){u(e.target.value)}})]})}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col s6 offset-s3",style:{textAlign:"center"},children:Object(d.jsx)("input",{type:"submit",value:"Create",className:"btn waves-effect waves-light #64b5f6 blue lighten-2"})})})]})]})},C=Object(s.createContext)(),S=Object(s.createContext)(),_=function(e){var t=e.callBack,c=Object(l.f)(),a=Object(s.useContext)(S),n=(a.state,a.dispatch);return Object(s.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e?(n({type:"USER",payload:e}),t(e),c.push("/")):c.push("/login")}),[]),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/createPost",children:Object(d.jsx)(k,{})}),Object(d.jsx)(l.a,{path:"/postDetails",children:Object(d.jsx)(w,{})}),Object(d.jsx)(l.a,{path:"/register",children:Object(d.jsx)(x,{callBack:t})}),Object(d.jsx)(l.a,{path:"/login",children:Object(d.jsx)(v,{callBack:t})}),Object(d.jsx)(l.a,{path:"/",children:Object(d.jsx)(y,{})})]})};var B=function(){var e=Object(s.useState)({page:"login",userData:null}),t=Object(r.a)(e,2),c=t[0],a=t[1],n=Object(s.useReducer)(j,null),i=Object(r.a)(n,2),l=i[0],b=i[1];return Object(d.jsxs)(o.a,{children:[Object(d.jsx)(C.Provider,{value:[c,a],children:Object(d.jsx)(u,{})}),Object(d.jsx)(S.Provider,{value:{state:l,dispatch:b},children:Object(d.jsx)(_,{callBack:function(e){b({type:"USER",payload:e}),a(e?{page:"logedIn",userData:e}:{page:"login"})}})})]})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,36)).then((function(t){var c=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;c(e),s(e),a(e),n(e),i(e)}))};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),P()}},[[35,1,2]]]);
//# sourceMappingURL=main.3144bb0d.chunk.js.map