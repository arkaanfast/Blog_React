{"ast":null,"code":"import _regeneratorRuntime from\"/home/arkaanfast/Desktop/Twimbit-client/twim-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/arkaanfast/Desktop/Twimbit-client/twim-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/arkaanfast/Desktop/Twimbit-client/twim-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{UserContext}from'../../App';import{useHistory}from'react-router-dom';import M from\"materialize-css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var callBack=_ref.callBack;var history=useHistory();var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],emailState=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],passwordState=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return fetch(\"https://twimbit-api.herokuapp.com/api/auth/login\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password,email:email})});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;if(res.status===200){localStorage.setItem('jwt',data.token);localStorage.setItem('user',JSON.stringify(data.user));dispatch({type:\"USER\",payload:data.user});callBack(data.user);history.push('/');M.toast({html:\"Successfully Loged In\",classes:\"#c62828 red darken-3\"});}else if(res.status===500){M.toast({html:data.message,classes:\"#c62828 red darken-3\"});emailState('');passwordState('');setLoading(false);}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(){return _ref2.apply(this,arguments);};}();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loader\",style:{position:\"absolute\",bottom:\"50%\",right:\" 50%\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"preloader-wrapper small active\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"spinner-layer spinner-green-only\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"circle-clipper left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"circle\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"gap-patch\",children:/*#__PURE__*/_jsx(\"div\",{className:\"circle\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"circle-clipper right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"circle\"})})]})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",id:\"login__container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{textAlign:'center',marginTop:\"8rem\"},children:/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome !!\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();handleLogin();},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row input__field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12 l6 offset-l3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons prefix\",children:\"email\"}),/*#__PURE__*/_jsx(\"input\",{required:\"true\",placeholder:\"Email\",id:\"icon_prefix\",type:\"email\",className:\"validate\",value:email,onChange:function onChange(e){emailState(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col col s12 l6 offset-l3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons prefix\",children:\"account_circle\"}),/*#__PURE__*/_jsx(\"input\",{required:\"true\",placeholder:\"Password\",id:\"icon_telephone\",type:\"password\",className:\"validate\",value:password,onChange:function onChange(e){passwordState(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col s6 offset-s3\",style:{textAlign:'center'},children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"btn waves-effect waves-light #64b5f6 blue lighten-2\"})})})]})]});};export default Login;","map":{"version":3,"sources":["/home/arkaanfast/Desktop/Twimbit-client/twim-blog/src/components/AuthComponents/LoginComponent.jsx"],"names":["React","useState","useContext","UserContext","useHistory","M","Login","callBack","history","state","dispatch","email","emailState","password","passwordState","loading","setLoading","handleLogin","fetch","method","headers","body","JSON","stringify","res","json","data","status","localStorage","setItem","token","user","type","payload","push","toast","html","classes","message","position","bottom","right","textAlign","marginTop","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { UserContext } from '../../App';\nimport { useHistory } from 'react-router-dom';\nimport M from \"materialize-css\";\n\n\nconst Login = ({ callBack }) => {\n  const history = useHistory();\n  const { state, dispatch } = useContext(UserContext);\n  const [email, emailState] = useState('');\n  const [password, passwordState] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleLogin = async () => {\n    setLoading(true);\n    const res = await fetch(\"https://twimbit-api.herokuapp.com/api/auth/login\", {\n      method: \"post\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        password,\n        email,\n      }),\n    });\n    const data = await res.json();\n    if (res.status === 200) {\n      localStorage.setItem('jwt', data.token)\n      localStorage.setItem('user', JSON.stringify(data.user))\n      dispatch({ type: \"USER\", payload: data.user })\n      callBack(data.user);\n      history.push('/');\n      M.toast({ html: \"Successfully Loged In\", classes: \"#c62828 red darken-3\" });\n    } else if (res.status === 500) {\n      M.toast({ html: data.message, classes: \"#c62828 red darken-3\" });\n      emailState('');\n      passwordState('');\n      setLoading(false);\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"loader\" style={{\n        position: \"absolute\",\n        bottom: \"50%\",\n        right: \" 50%\"\n      }}>\n        <div className=\"preloader-wrapper small active\">\n          <div className=\"spinner-layer spinner-green-only\">\n            <div className=\"circle-clipper left\">\n              <div className=\"circle\"></div>\n            </div>\n            <div className=\"gap-patch\">\n              <div className=\"circle\"></div>\n            </div>\n            <div className=\"circle-clipper right\">\n              <div className=\"circle\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"container\" id=\"login__container\">\n      <div className=\"row\" style={{ textAlign: 'center', marginTop: \"8rem\" }}>\n        <h1>Welcome !!</h1>\n      </div>\n      <form onSubmit={(e) => { e.preventDefault(); handleLogin() }}>\n        <div className=\"row input__field\">\n          <div className=\"input-field col s12 l6 offset-l3\" >\n            <i className=\"material-icons prefix\">email</i>\n            <input required=\"true\" placeholder=\"Email\" id=\"icon_prefix\" type=\"email\" className=\"validate\" value={email} onChange={(e) => { emailState(e.target.value) }} />\n\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"input-field col col s12 l6 offset-l3\" >\n            <i className=\"material-icons prefix\">account_circle</i>\n            <input required=\"true\" placeholder=\"Password\" id=\"icon_telephone\" type=\"password\" className=\"validate\" value={password} onChange={(e) => { passwordState(e.target.value) }} />\n\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col s6 offset-s3\" style={{ textAlign: 'center' }}>\n            <input type=\"submit\" value=\"Login\" className=\"btn waves-effect waves-light #64b5f6 blue lighten-2\" />\n          </div>\n        </div>\n\n      </form>\n    </div>\n\n\n  );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}